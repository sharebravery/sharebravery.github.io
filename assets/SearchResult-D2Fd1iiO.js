import{g as V,u as W,h as X,i as Z,j as ee,k as te,l as ae,m as e,s as se,R as D,n as re,p as le,q as ne,t as oe,v as S,x as E,y as ie,z as ce,A as $,B as I,C as ue,D as de,E as me,L as he,F as ve,G as ge,H as pe,I as ye,J as be,K as x,M as we,N as _}from"./app-DTQAk5n9.js";const ke=["/","/intro.html","/space-station.html","/backend/","/backend/aliyun-ecs-java-web-env.html","/backend/nestjs-connect-mongodb.html","/backend/nodejs-novel-crawler-nestjs-proxy.html","/backend/polymarket-trading-bot-part1.html","/backend/web3-ton-development-tips.html","/en/","/en/intro.html","/frontend/","/frontend/frontend-table-export-merge-1.html","/frontend/frontend-table-export-merge-2.html","/frontend/frontend-table-export-merge-3.html","/frontend/monaco-editor-websocket-debug.html","/frontend/svg-doodle-component.html","/devops/","/devops/ccaa-offline-downloader.html","/devops/frontend-container-config-injection.html","/devops/gitlab-runner-setup.html","/devops/linux-socket-and-process.html","/devops/mediawiki-setup.html","/devops/static-vs-dynamic-libraries.html","/devops/weengine-on-ecs.html","/hardware/1248-binary-conversion.html","/hardware/","/hardware/distributed-robot-inspection-system.html","/hardware/hackintosh-simple-guide.html","/hardware/hyper-v-embedded-linux-dev.html","/hardware/iec-61499-industrial-automation.html","/hardware/linux-gpio-guide.html","/hardware/modbus-rs485-guide.html","/hardware/rs485-serial-communication-guide.html","/tools/","/tools/custom-writing-skills-tutorial.html","/tools/git-panic-room.html","/tools/package-manager-battle.html","/tools/writing-workflow-replication.html","/en/backend/","/en/backend/polymarket-trading-bot-part1.html","/en/backend/web3-ton-development-tips.html","/en/devops/","/en/devops/ccaa-offline-downloader.html","/en/devops/frontend-container-config-injection.html","/en/devops/gitlab-runner-setup.html","/en/devops/linux-socket-and-process.html","/en/devops/mediawiki-setup.html","/en/devops/static-vs-dynamic-libraries.html","/en/devops/weengine-on-ecs.html","/en/frontend/","/en/frontend/monaco-editor-websocket-debug.html","/en/tools/","/en/tools/git-panic-room.html","/en/tools/package-manager-battle.html","/en/hardware/1248-binary-conversion.html","/en/hardware/","/en/hardware/linux-gpio-guide.html","/en/hardware/modbus-rs485-guide.html","/404.html","/category/","/category/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/","/category/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/","/category/devops/","/category/%E7%A1%AC%E4%BB%B6%E4%B8%8E%E7%B3%BB%E7%BB%9F/","/category/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7/","/category/%E5%B7%A5%E5%85%B7/","/en/category/","/en/category/backend/","/en/category/devops/","/en/category/frontend/","/en/category/tools/","/en/category/hardware-_-systems/","/en/category/hardware-_-system/","/tag/","/tag/java/","/tag/node.js/","/tag/nestjs/","/tag/mongodb/","/tag/backend/","/tag/web3/","/tag/polymarket/","/tag/frontend/","/tag/ide/","/tag/devops/","/tag/docker/","/tag/kubernetes/","/tag/gitlab/","/tag/git/","/tag/linux/","/tag/hardware/","/tag/hackintosh/","/tag/gpio/","/tag/ai/","/tag/tools/","/tag/thinking/","/tag/workflow/","/en/tag/","/en/tag/backend/","/en/tag/web3/","/en/tag/polymarket/","/en/tag/devops/","/en/tag/docker/","/en/tag/kubernetes/","/en/tag/gitlab/","/en/tag/git/","/en/tag/linux/","/en/tag/vue.js/","/en/tag/monaco-editor/","/en/tag/websockets/","/en/tag/workflow/","/en/tag/tools/","/en/tag/node.js/","/en/tag/hardware/","/en/tag/gpio/","/article/","/en/article/","/star/","/en/star/","/timeline/","/en/timeline/"],fe="SLIMSEARCH_QUERY_HISTORY",y=_(fe,[]),Ee=()=>{const{queryHistoryCount:r}=x;return{enabled:r>0,queryHistories:y,addQueryHistory:i=>{y.value=Array.from(new Set([i,...y.value.slice(0,r-1)]))},removeQueryHistory:i=>{y.value=[...y.value.slice(0,i),...y.value.slice(i+1)]}}},j=r=>ke[r.id]+("anchor"in r?`#${r.anchor}`:""),xe="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:T}=x,b=_(xe,[]),He=()=>({enabled:T>0,resultHistories:b,addResultHistory:o=>{{const i={link:j(o),display:o.display};"header"in o&&(i.header=o.header),b.value=[i,...b.value.slice(0,T-1)]}},removeResultHistory:o=>{b.value=[...b.value.slice(0,o),...b.value.slice(o+1)]}}),Ae=r=>{const{page:o,routeLocale:i}=ue(),H=de(),l=S(0),w=E(()=>l.value>0),d=ye([]);return me(()=>{const{search:A,terminate:v}=he(),k=be(g=>{const{resultsFilter:B=s=>s,querySplitter:p,suggestionsFilter:q,...n}=H.value;g?(l.value+=1,A(g,i.value,n).then(s=>B(s,g,i.value,o.value)).then(s=>{l.value-=1,d.value=s}).catch(s=>{console.warn(s),l.value-=1,l.value||(d.value=[])})):d.value=[]},x.searchDelay-x.suggestDelay,{maxWait:5e3});ve([r,i],([g])=>k(g.join(" "))),ge(()=>{v()})}),{isSearching:w,results:d}};var Re=V({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(r,{emit:o}){const i=W(),H=X(),l=Z(ee),{addQueryHistory:w,queryHistories:d,removeQueryHistory:A}=Ee(),{resultHistories:v,addResultHistory:k,removeResultHistory:g}=He(),B=we(r,"queries"),{results:p,isSearching:q}=Ae(B),n=oe({isQuery:!0,index:0}),s=S(0),m=S(0),F=E(()=>d.value.length>0||v.value.length>0),R=E(()=>p.value.length>0),Q=E(()=>p.value[s.value]||null),M=()=>{const{isQuery:t,index:a}=n;a===0?(n.isQuery=!t,n.index=t?v.value.length-1:d.value.length-1):n.index=a-1},U=()=>{const{isQuery:t,index:a}=n;a===(t?d.value.length-1:v.value.length-1)?(n.isQuery=!t,n.index=0):n.index=a+1},O=()=>{s.value=s.value>0?s.value-1:p.value.length-1,m.value=Q.value.contents.length-1},P=()=>{s.value=s.value<p.value.length-1?s.value+1:0,m.value=0},Y=()=>{m.value<Q.value.contents.length-1?m.value+=1:P()},z=()=>{m.value>0?m.value-=1:O()},C=t=>t.map(a=>pe(a)?a:e(a[0],a[1])),G=t=>{if(t.type==="customField"){const a=ie[t.index]||"$content",[h,c=""]=ce(a)?a[H.value].split("$content"):a.split("$content");return t.display.map(u=>e("div",C([h,...u,c])))}return t.display.map(a=>e("div",C(a)))},f=()=>{s.value=0,m.value=0,o("updateQuery",""),o("close")},J=()=>e("div",{class:"slimsearch-records"},e("div",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},l.value.queryHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},d.value.map((t,a)=>{const h=n.isQuery&&n.index===a;return e("li",{class:["slimsearch-record-matches",{active:h}],role:"option","aria-selected":h,onClick:()=>{o("updateQuery",t)}},e("div",[e($,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},t),e("button",{type:"button",class:"slimsearch-remove-icon",title:l.value.remove,"aria-label":l.value.remove,innerHTML:I,onClick:c=>{c.preventDefault(),c.stopPropagation(),A(a)}})]))}))])),K=()=>e("ul",{class:"slimsearch-records"},e("li",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},l.value.resultHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},v.value.map((t,a)=>{const h=!n.isQuery&&n.index===a;return e("li",{class:["slimsearch-record-matches",{active:h}],role:"option","aria-selected":h},e(D,{to:t.link,onClick:()=>{f()}},()=>[e($,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[t.header?e("div",{class:"slimsearch-record-content-header"},t.header):null,e("div",t.display.map(c=>C(c)).flat())]),e("button",{type:"button",class:"slimsearch-remove-icon",title:l.value.remove,"aria-label":l.value.remove,innerHTML:I,onClick:c=>{c.preventDefault(),c.stopPropagation(),g(a)}})]))}))]));return te("keydown",t=>{if(r.isFocusing){if(R.value){if(t.key==="ArrowUp")z();else if(t.key==="ArrowDown")Y();else if(t.key==="Enter"){const a=Q.value.contents[m.value];w(r.queries.join(" ")),k(a),i.push(j(a)),f()}}else if(t.key==="ArrowUp")M();else if(t.key==="ArrowDown")U();else if(t.key==="Enter"){const{index:a}=n;n.isQuery?(t.preventDefault(),o("updateQuery",d.value[a])):(i.push(v.value[a].link),f())}}}),ae([s,m],()=>{document.querySelector(".slimsearch-record.active .slimsearch-record-matches.active")?.scrollIntoView(!1)},{flush:"post"}),()=>e("div",{id:"slimsearch-results",class:["slimsearch-result-wrapper",{empty:r.queries.length?!R.value:!F.value}]},r.queries.length?q.value?e(se,{hint:l.value.searching}):R.value?e("div",{class:"slimsearch-records",role:"listbox","aria-labeledby":"slimsearch-label"},p.value.map(({title:t,contents:a},h)=>{const c=s.value===h;return e("div",{class:["slimsearch-record",{active:c}],role:"group","aria-selected":c},[e("div",{class:"slimsearch-record-title"},t||l.value.defaultTitle),e("ul",{class:"slimsearch-record-contents"},a.map((u,N)=>{const L=c&&m.value===N;return e("li",{class:["slimsearch-record-matches",{active:L}],role:"option","aria-selected":L},e(D,{to:j(u),onClick:()=>{w(r.queries.join(" ")),k(u),f()}},()=>[u.type==="text"?null:e(u.type==="title"?re:u.type==="heading"?le:ne,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[u.type==="text"&&u.header?e("div",{class:"slimsearch-record-content-header"},u.header):null,e("div",G(u))])]))}))])})):l.value.emptyResult:F.value?[J(),K()]:l.value.emptyHistory)}});export{Re as default};
