import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as e,o as t}from"./app-zaYUK-qA.js";const n={};function l(h,i){return t(),a("div",null,[...i[0]||(i[0]=[e(`<h1 id="git-救火指南-那些年我踩过的坑" tabindex="-1"><a class="header-anchor" href="#git-救火指南-那些年我踩过的坑"><span>Git 救火指南：那些年我踩过的坑</span></a></h1><p>如果 Git 是一个游戏，那 <code>git reset --hard</code> 绝对是那个让你“删号重练”的按钮。</p><p>昨天有个刚入行的朋友问我：“Git 到底要学多少命令才够用？”他看着那本几百页的权威指南，眼神里充满了绝望。</p><p>我说，说实话，我用了这么多年 Git，真正救命的也就那几个。</p><p>很多时候，我们并不需要一本百科全书，我们需要的是一个<strong>急救包</strong>——当你搞砸了，手心冒汗，老板就在你身后盯着的时候，能一眼看到的救命稻草。</p><p>这篇文章不讲原理（DAG、Merkle Tree 留给面试），只讲<strong>生存</strong>。</p><h2 id="_1-想要-打包带走-的时候" tabindex="-1"><a class="header-anchor" href="#_1-想要-打包带走-的时候"><span>1. 想要“打包带走”的时候</span></a></h2><p>我是真的遇到过这种情况：老板不懂 Git，非要我把源码“发个包给他”。</p><p>以前我会傻傻地手动复制文件，还要一个个删掉 <code>node_modules</code> 和 <code>.git</code> 目录，搞得狼狈不堪。一边删一边担心：万一漏删了私钥文件怎么办？</p><p>后来我发现，Git 原来自带了“打包”功能。</p><p><strong>这一行命令，能救命：</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> archive</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --format=zip</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --output</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> source-code.zip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> master</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>它会自动忽略 <code>.gitignore</code> 里的文件，生成的压缩包极其纯净。那一刻我才觉得，Git 是真的懂程序员的。它就像一个贴心的管家，帮你把房间打扫得干干净净再交给客人。</p><h2 id="_2-只有上帝知道我刚才写了什么" tabindex="-1"><a class="header-anchor" href="#_2-只有上帝知道我刚才写了什么"><span>2. 只有上帝知道我刚才写了什么</span></a></h2><p>有时候写嗨了，把还没写完的脏话或者 Token 提交了上去。这时候如果不处理，这些“黑历史”就会永远留在 Commit Log 里，成为同事们茶余饭后的谈资。</p><p><strong>如果你还没 Push，还有救：</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 方案 A：软着陆（推荐）</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 撤销提交，但保留你写的代码。就像时间倒流，但记忆保留。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> reset</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --soft</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> HEAD~1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 方案 B：硬着陆（慎用！！！）</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 彻底抹除最后一次提交，就像它从未发生过。</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 我只在深夜头脑发热写了一堆垃圾代码时才用它。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> reset</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --hard</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> HEAD~1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>把 <code>reset --soft</code> 想象成游戏里的“读档”，你可以重新来过，装备还在。</p><h2 id="_3-捉鬼游戏-这行代码到底是谁写的" tabindex="-1"><a class="header-anchor" href="#_3-捉鬼游戏-这行代码到底是谁写的"><span>3. 捉鬼游戏：这行代码到底是谁写的？</span></a></h2><p>线上出了 Bug，代码逻辑看起来极其愚蠢。你怒气冲冲地想找出是哪个“天才”写的，准备去 Battle 一番。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> blame</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> filename.ts</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>这个命令会把每一行代码的作者和修改时间列出来。</p><p><strong>温馨提示</strong>：在按下回车之前，请做好心理准备。因为很多时候，你会发现那个“天才”竟然是<strong>三个月前的你自己</strong>。</p><p>这时候，原本准备好的怒火只能默默咽回去，还得假装若无其事地修好它。这可能就是成长的代价吧。</p><h2 id="_4-正在修-bug-老板突然让我切分支" tabindex="-1"><a class="header-anchor" href="#_4-正在修-bug-老板突然让我切分支"><span>4. 正在修 Bug，老板突然让我切分支</span></a></h2><p>这绝对是开发者最讨厌的场景：你的工作区一团糟，代码写了一半，逻辑还没跑通。这时候老板冲过来说：“线上有个紧急 Bug，马上修一下！”</p><p>你不想 Commit（因为代码是坏的），也不想丢掉进度。</p><p><strong>这时候，你需要一个“时间胶囊”：</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 1. 把案发现场封存起来</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> stash</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 2. 现在工作区干净了，切分支去救火吧</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> checkout</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> hotfix-branch</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># ... 修 Bug，提交，上线 ...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 3. 救火结束，切回来</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> checkout</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> my-feature</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 4. 打开时间胶囊，恢复现场</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> stash</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pop</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>每次用 <code>git stash pop</code> 看着代码重新出现的时候，我都有一种“这就是魔法”的错觉。它就像是你在这个平行宇宙按下了暂停键，去另一个宇宙拯救完世界回来，一切如初。</p><h2 id="_5-记忆碎片-我记得我写过这行代码" tabindex="-1"><a class="header-anchor" href="#_5-记忆碎片-我记得我写过这行代码"><span>5. 记忆碎片：我记得我写过这行代码...</span></a></h2><p>你是不是也有这种时候？明明记得写过一个很巧妙的 <code>TODO</code> 或者一个特殊的函数名，但死活找不到在哪个文件里了。翻遍了十几个文件，眼睛都花了。</p><p><strong>别用编辑器的搜索了，用 Git 的搜索：</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 在所有文件中搜索 &quot;TODO&quot;，速度快到飞起</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;TODO&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 甚至可以在历史版本里搜（比如 5 次提交前）</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;function_name&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> HEAD~5</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><p>Git 很强大，也很可怕。</p><p>我现在的原则是：<strong>在该 Commit 的时候 Commit，在该 Push 之前三思。</strong></p><p>希望这份手册能帮你少掉几根头发。</p><p><em>END</em></p>`,39)])])}const d=s(n,[["render",l]]),k=JSON.parse('{"path":"/tech/tools/git-panic-room.html","title":"Git 救火指南：那些年我踩过的坑","lang":"zh-CN","frontmatter":{"title":"Git 救火指南：那些年我踩过的坑","date":"2021-07-23T00:00:00.000Z","category":"效率工具","tag":["Git","Workflow"],"description":"Git 救火指南：那些年我踩过的坑 如果 Git 是一个游戏，那 git reset --hard 绝对是那个让你“删号重练”的按钮。 昨天有个刚入行的朋友问我：“Git 到底要学多少命令才够用？”他看着那本几百页的权威指南，眼神里充满了绝望。 我说，说实话，我用了这么多年 Git，真正救命的也就那几个。 很多时候，我们并不需要一本百科全书，我们需要的...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Git 救火指南：那些年我踩过的坑\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2021-07-23T00:00:00.000Z\\",\\"dateModified\\":\\"2026-02-08T06:53:18.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"不辞远\\",\\"url\\":\\"https://github.com/sharebravery\\"}]}"],["meta",{"property":"og:url","content":"https://sharebravery.com/tech/tools/git-panic-room.html"}],["meta",{"property":"og:site_name","content":"不辞远的分享"}],["meta",{"property":"og:title","content":"Git 救火指南：那些年我踩过的坑"}],["meta",{"property":"og:description","content":"Git 救火指南：那些年我踩过的坑 如果 Git 是一个游戏，那 git reset --hard 绝对是那个让你“删号重练”的按钮。 昨天有个刚入行的朋友问我：“Git 到底要学多少命令才够用？”他看着那本几百页的权威指南，眼神里充满了绝望。 我说，说实话，我用了这么多年 Git，真正救命的也就那几个。 很多时候，我们并不需要一本百科全书，我们需要的..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2026-02-08T06:53:18.000Z"}],["meta",{"property":"article:tag","content":"Workflow"}],["meta",{"property":"article:tag","content":"Git"}],["meta",{"property":"article:published_time","content":"2021-07-23T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2026-02-08T06:53:18.000Z"}]]},"git":{"createdTime":1769332830000,"updatedTime":1770533598000,"contributors":[{"name":"sharebravery","username":"sharebravery","email":"sharebravery@gmail.com","commits":4,"url":"https://github.com/sharebravery"},{"name":"Claude Sonnet 4.5","username":"","email":"noreply@anthropic.com","commits":1}]},"readingTime":{"minutes":3.84,"words":1153},"filePathRelative":"tech/tools/git-panic-room.md","excerpt":"\\n<p>如果 Git 是一个游戏，那 <code>git reset --hard</code> 绝对是那个让你“删号重练”的按钮。</p>\\n<p>昨天有个刚入行的朋友问我：“Git 到底要学多少命令才够用？”他看着那本几百页的权威指南，眼神里充满了绝望。</p>\\n<p>我说，说实话，我用了这么多年 Git，真正救命的也就那几个。</p>\\n<p>很多时候，我们并不需要一本百科全书，我们需要的是一个<strong>急救包</strong>——当你搞砸了，手心冒汗，老板就在你身后盯着的时候，能一眼看到的救命稻草。</p>\\n<p>这篇文章不讲原理（DAG、Merkle Tree 留给面试），只讲<strong>生存</strong>。</p>","autoDesc":true}');export{d as comp,k as data};
