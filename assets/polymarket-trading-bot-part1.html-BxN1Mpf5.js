import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,b as n,o as t}from"./app-BE0JCoU4.js";const l={};function e(h,s){return t(),a("div",null,[...s[0]||(s[0]=[n(`<h1 id="预测市场系列-一-从零开发-polymarket-跟单-bot" tabindex="-1"><a class="header-anchor" href="#预测市场系列-一-从零开发-polymarket-跟单-bot"><span>预测市场系列（一）：从零开发 Polymarket 跟单 Bot</span></a></h1><blockquote><p>本文仅探讨技术实现，不构成投资建议</p></blockquote><p>预测市场最近热度起飞。作为程序员，参与一个市场最好的方式不是去&quot;赌&quot;结果，而是去<strong>建设工具</strong>。</p><p>跟单 Bot 是最完美的&quot;工程练兵场&quot;：逻辑简单，但覆盖了 API 交互、签名机制、订单簿匹配、滑点控制等量化交易的基础设施。</p><p>这篇文章聊聊怎么从零设计并实现一个基于 Polymarket 官方 API 的跟单 Bot，以及开发过程中需要注意的&quot;坑&quot;。</p><hr><h2 id="架构设计-极简主义" tabindex="-1"><a class="header-anchor" href="#架构设计-极简主义"><span>架构设计：极简主义</span></a></h2><p>如无必要，勿增实体。一个跟单 Bot 的核心逻辑流程大致如下：</p><ol><li><strong>监听</strong>：轮询目标地址的活动</li><li><strong>决策</strong>：判断是否跟单，计算跟单金额</li><li><strong>执行</strong>：调用交易接口下单</li></ol><hr><h2 id="第一步-监听" tabindex="-1"><a class="header-anchor" href="#第一步-监听"><span>第一步：监听</span></a></h2><p>要实现跟单，首先得知道目标地址干了什么。Polymarket 提供了 Data API 来查询用户活动。</p><p>虽然官方也提供了 WebSocket，但对于简单的跟单需求，<strong>轮询</strong>其实是最稳妥且容易实现的方案。</p><h3 id="核心接口-activity" tabindex="-1"><a class="header-anchor" href="#核心接口-activity"><span>核心接口：Activity</span></a></h3><p>我们需要关注的是 <code>/activity</code> 端点，它可以返回指定用户的交易记录。</p><div class="language-typescript line-numbers-mode" data-highlighter="shiki" data-ext="typescript" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-typescript"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 示例：获取目标地址的最近交易</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> DATA_API_URL</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;https://data-api.polymarket.com/activity&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">async</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> fetchLatestActivity</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">walletAddress</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#0184BC;--shiki-dark:#E5C07B;"> string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> params</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> URLSearchParams</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">({</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        user</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> walletAddress</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        limit</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;20&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        sortBy</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;timestamp&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        sortDirection</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;desc&#39;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> response</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> await</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> fetch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">\`</span><span style="--shiki-light:#CA1243;--shiki-dark:#C678DD;">\${</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">DATA_API_URL</span><span style="--shiki-light:#CA1243;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">?</span><span style="--shiki-light:#CA1243;--shiki-dark:#C678DD;">\${</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">params</span><span style="--shiki-light:#CA1243;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">\`</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> data</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> await</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> response</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">json</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> data</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="工程要点-状态去重" tabindex="-1"><a class="header-anchor" href="#工程要点-状态去重"><span>工程要点：状态去重</span></a></h3><p>API 返回的数据可能有延迟或重复。你肯定不想因为网络波动，导致同一笔交易跟了两次。</p><p><strong>最佳实践</strong>：务必使用 <code>transactionHash</code> 作为唯一键进行去重。在内存中维护一个 <code>Set&lt;string&gt;</code> 记录已处理的 Hash。</p><hr><h2 id="第二步-执行" tabindex="-1"><a class="header-anchor" href="#第二步-执行"><span>第二步：执行</span></a></h2><p>一旦监听到目标地址有了新动作（比如买入了 <code>Trump Win</code>），我们就需要通过 <strong>CLOB (Central Limit Order Book)</strong> 接口进行跟单。</p><p>Polymarket 官方提供了非常完善的 TypeScript SDK <code>@polymarket/clob-client</code>，强烈建议直接使用，别自己去手搓签名逻辑。</p><h3 id="核心操作-下单" tabindex="-1"><a class="header-anchor" href="#核心操作-下单"><span>核心操作：下单</span></a></h3><p>跟单最讲究速度，所以我们通常使用 <strong>FAK (Fill-And-Kill)</strong> 类型的市价单。这种订单会立即吃掉盘口的流动性，未成交部分自动撤销，不会挂单暴露意图。</p><div class="language-typescript line-numbers-mode" data-highlighter="shiki" data-ext="typescript" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-typescript"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">ClobClient</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Side</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">OrderType</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;@polymarket/clob-client&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">async</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> followTrade</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">client</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ClobClient</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">tokenId</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#0184BC;--shiki-dark:#E5C07B;"> string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">amount</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#0184BC;--shiki-dark:#E5C07B;"> number</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // 1. 创建订单结构</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> order</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> await</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> client</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">createMarketOrder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">({</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        tokenID</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> tokenId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        amount</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> amount</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 下单金额</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        side</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> Side</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#E06C75;">BUY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 或 Side.SELL</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // 2. 签名并发送</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> response</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> await</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> client</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">postOrder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">order</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">OrderType</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#E06C75;">FAK</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;跟单结果:&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">response</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="工程要点-滑点保护" tabindex="-1"><a class="header-anchor" href="#工程要点-滑点保护"><span>工程要点：滑点保护</span></a></h3><p>大佬买入的时候价格是 $0.5，等你收到信号去买的时候，价格可能已经被机器人抬到了 $0.6。</p><p>在下单前，一定要先查询当前的 Orderbook，计算滑点。</p><div class="language-typescript line-numbers-mode" data-highlighter="shiki" data-ext="typescript" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-typescript"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 伪代码：滑点检查</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> book</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> await</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> client</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getOrderBook</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">tokenId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> bestAsk</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> book</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">asks</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">].</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">price</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 市场卖一价</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Math</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">abs</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">bestAsk</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> -</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> targetPrice</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> targetPrice</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> &gt;</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> MAX_SLIPPAGE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">warn</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;滑点过高，放弃跟单&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="需要注意的-坑" tabindex="-1"><a class="header-anchor" href="#需要注意的-坑"><span>需要注意的&quot;坑&quot;</span></a></h2><p>在实际开发中，你需要注意一些 Polymarket 特有的概念。</p><h3 id="_1-账号体系-proxy-wallet" tabindex="-1"><a class="header-anchor" href="#_1-账号体系-proxy-wallet"><span>1. 账号体系 (Proxy Wallet)</span></a></h3><p>Polymarket 为了实现免 Gas 交易，引入了 Proxy Wallet 机制。</p><ul><li><strong>前端显示的地址</strong>：通常是你的 Proxy 地址</li><li><strong>你持有的私钥</strong>：是用来控制 Proxy 的 EOA (Externally Owned Account)</li><li><strong>代码里填什么</strong>：在使用 SDK 初始化时，务必搞清楚 <code>SIGNATURE_TYPE</code>。如果你用的是 Metamask 导出的私钥，通常需要配置为 EOA 签名模式，但操作的主体是 Proxy</li></ul><h3 id="_2-卖出-vs-赎回" tabindex="-1"><a class="header-anchor" href="#_2-卖出-vs-赎回"><span>2. &quot;卖出&quot; vs &quot;赎回&quot;</span></a></h3><p>在二元市场里，获利了结有两种方式：</p><ul><li><strong>Sell (卖出)</strong>：在市场上把 Token 卖给别人，这是最常见的</li><li><strong>Redeem (赎回)</strong>：如果事件已经结束（结算了），或者你同时持有了 <code>Yes</code> 和 <code>No</code> (即 Merge 了一套完整份额)，你需要做的是赎回操作，而不是卖出</li><li><strong>Bot 逻辑</strong>：你的 Bot 不仅要监听 <code>Buy/Sell</code>，还需要处理 <code>Redeem</code> 事件，否则会导致仓位残留</li></ul><h3 id="_3-api-频率限制" tabindex="-1"><a class="header-anchor" href="#_3-api-频率限制"><span>3. API 频率限制</span></a></h3><p>Polymarket 的公共 API 有频率限制。如果你监听的地址列表很长，或者轮询速度太快，很容易被 Cloudflare 拦截。</p><p><strong>建议</strong>：生产环境要么上代理池，要么合理控制 <code>fetch</code> 的间隔。</p><hr><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结</span></a></h2><p>写一个 Bot 并不难，难的是如何处理各种边界情况和异常。</p><p>通过官方文档和 SDK，我们可以快速搭建起一个 MVP。但要让它稳定盈利，还需要在<strong>滑点控制</strong>、<strong>Gas 优化</strong>以及<strong>资金管理</strong>上下功夫。</p><p>希望这篇文章能帮你迈出 Polymarket 量化开发的第一步。</p><hr><h3 id="相关资料" tabindex="-1"><a class="header-anchor" href="#相关资料"><span>相关资料</span></a></h3><ul><li><a href="https://docs.polymarket.com/" target="_blank" rel="noopener noreferrer">Polymarket 官方 API 文档</a></li><li><a href="https://github.com/Polymarket/clob-client" target="_blank" rel="noopener noreferrer">CLOB Client SDK</a></li></ul>`,50)])])}const r=i(l,[["render",e]]),d=JSON.parse('{"path":"/backend/polymarket-trading-bot-part1.html","title":"预测市场系列（一）：从零开发 Polymarket 跟单 Bot","lang":"zh-CN","frontmatter":{"title":"预测市场系列（一）：从零开发 Polymarket 跟单 Bot","date":"2025-10-24T00:00:00.000Z","categories":["后端技术"],"tags":["Backend","Web3","Polymarket"],"description":"预测市场系列（一）：从零开发 Polymarket 跟单 Bot 本文仅探讨技术实现，不构成投资建议 预测市场最近热度起飞。作为程序员，参与一个市场最好的方式不是去\\"赌\\"结果，而是去建设工具。 跟单 Bot 是最完美的\\"工程练兵场\\"：逻辑简单，但覆盖了 API 交互、签名机制、订单簿匹配、滑点控制等量化交易的基础设施。 这篇文章聊聊怎么从零设计并实现一...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"预测市场系列（一）：从零开发 Polymarket 跟单 Bot\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2025-10-24T00:00:00.000Z\\",\\"dateModified\\":\\"2026-01-30T08:22:46.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"sharebravery\\",\\"url\\":\\"https://github.com/sharebravery\\"}]}"],["meta",{"property":"og:url","content":"https://sharebravery.github.io/backend/polymarket-trading-bot-part1.html"}],["meta",{"property":"og:site_name","content":"不辞远的分享"}],["meta",{"property":"og:title","content":"预测市场系列（一）：从零开发 Polymarket 跟单 Bot"}],["meta",{"property":"og:description","content":"预测市场系列（一）：从零开发 Polymarket 跟单 Bot 本文仅探讨技术实现，不构成投资建议 预测市场最近热度起飞。作为程序员，参与一个市场最好的方式不是去\\"赌\\"结果，而是去建设工具。 跟单 Bot 是最完美的\\"工程练兵场\\"：逻辑简单，但覆盖了 API 交互、签名机制、订单簿匹配、滑点控制等量化交易的基础设施。 这篇文章聊聊怎么从零设计并实现一..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:locale:alternate","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2026-01-30T08:22:46.000Z"}],["meta",{"property":"article:tag","content":"Polymarket"}],["meta",{"property":"article:tag","content":"Web3"}],["meta",{"property":"article:tag","content":"Backend"}],["meta",{"property":"article:published_time","content":"2025-10-24T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2026-01-30T08:22:46.000Z"}],["link",{"rel":"alternate","hreflang":"en-us","href":"https://sharebravery.github.io/en/backend/polymarket-trading-bot-part1.html"}]]},"git":{"createdTime":1769320151000,"updatedTime":1769761366000,"contributors":[{"name":"sharebravery","username":"sharebravery","email":"sharebravery@gmail.com","commits":7,"url":"https://github.com/sharebravery"},{"name":"Claude Sonnet 4.5","username":"","email":"noreply@anthropic.com","commits":2}]},"readingTime":{"minutes":4.06,"words":1218},"filePathRelative":"backend/polymarket-trading-bot-part1.md","excerpt":"\\n<blockquote>\\n<p>本文仅探讨技术实现，不构成投资建议</p>\\n</blockquote>\\n<p>预测市场最近热度起飞。作为程序员，参与一个市场最好的方式不是去\\"赌\\"结果，而是去<strong>建设工具</strong>。</p>\\n<p>跟单 Bot 是最完美的\\"工程练兵场\\"：逻辑简单，但覆盖了 API 交互、签名机制、订单簿匹配、滑点控制等量化交易的基础设施。</p>\\n<p>这篇文章聊聊怎么从零设计并实现一个基于 Polymarket 官方 API 的跟单 Bot，以及开发过程中需要注意的\\"坑\\"。</p>\\n<hr>\\n<h2>架构设计：极简主义</h2>\\n<p>如无必要，勿增实体。一个跟单 Bot 的核心逻辑流程大致如下：</p>","autoDesc":true}');export{r as comp,d as data};
