import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as t,o as e}from"./app-zaYUK-qA.js";const n="/assets/01-infographic-arbitrage-math-BothsihW.png",l="/assets/02-infographic-dynamic-inventory-CQlvcq7J.png",r={};function p(h,i){return e(),a("div",null,[...i[0]||(i[0]=[t('<h1 id="polymarket-量化交易实战-八-双向套利策略详解" tabindex="-1"><a class="header-anchor" href="#polymarket-量化交易实战-八-双向套利策略详解"><span>Polymarket 量化交易实战（八）：双向套利策略详解</span></a></h1><p><strong>这是系列中最“硬核”的一篇。</strong></p><p>我们将揭开 V5 机器人的核心盈利逻辑——双向做市（Two-Sided Market Making）。<br> 这里没有玄学，只有数学。</p><h4 id="_1-策略原理-利用互补性" tabindex="-1"><a class="header-anchor" href="#_1-策略原理-利用互补性"><span>1. 策略原理：利用互补性</span></a></h4><figure><img src="'+n+`" alt="Arbitrage Math: Cost &lt; Value" tabindex="0" loading="lazy"><figcaption>Arbitrage Math: Cost &lt; Value</figcaption></figure><p>预测市场有一个核心公理：<br><strong>Yes Price + No Price = 1.0 (理论值)</strong></p><p>如果市场上 Yes 卖 0.60，No 卖 0.40，这是完美平衡。<br> 但实际上，订单簿往往是这样的：</p><ul><li><strong>Yes</strong>: Bid 0.58 / Ask 0.62</li><li><strong>No</strong>: Bid 0.38 / Ask 0.42</li></ul><p><strong>我们的机会：Spread（价差）</strong><br> 作为 Maker，我们同时挂买单：</p><ul><li>Yes @ 0.59</li><li>No @ 0.39</li></ul><p><strong>盈利推演：</strong><br> 假设两个单子都成交了：</p><ul><li>成本 = 0.59 + 0.39 = <strong>0.98</strong></li><li>最终价值 = <strong>1.00</strong> (无论结果如何，合并后可赎回 $1)</li><li><strong>无风险利润 = 1.00 - 0.98 = $0.02 (ROI 2%)</strong></li></ul><p><strong>结论：双向套利的本质，是用 0.98 的成本，合成了价值 1.00 的完整资产。</strong></p><h4 id="_2-代码实现-simpleupdowncycle" tabindex="-1"><a class="header-anchor" href="#_2-代码实现-simpleupdowncycle"><span>2. 代码实现：SimpleUpDownCycle</span></a></h4><p>在代码中，我们并不追求“完美对冲”，而是动态压价。</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 策略：跟随并压价 (Penny Jump)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 在 Ask 价格下方 -0.02 处挂单，保证成交即有利润空间</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">price_yes </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> raw_ask_yes </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0.02</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">price_no </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> raw_ask_no </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0.02</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 价格保护：如果加起来太贵，就别干了</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> price_yes </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> price_no </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0.99</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 没油水</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>为了让两边订单尽可能同时到达服务器，使用 <code>place_orders_batch</code> 批量发送（注意：这不是原子操作，订单仍可能部分成功）。</p><h4 id="_3-库存管理的挑战" tabindex="-1"><a class="header-anchor" href="#_3-库存管理的挑战"><span>3. 库存管理的挑战</span></a></h4><figure><img src="`+l+`" alt="Dynamic Inventory Expansion" tabindex="0" loading="lazy"><figcaption>Dynamic Inventory Expansion</figcaption></figure><p>理论很美好，现实很骨感。<br> 最常见的情况是：<strong>一边成交了，另一边没成交。</strong><br> 这就形成了 <strong>Delta 风险</strong>。</p><p><strong>解决方案：动态平衡机制</strong><br> 我们在 V5 中引入了基于库存的动态开关：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 获取持仓</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">up_pos </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">get_pos</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(up_id)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">down_pos </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">get_pos</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(down_id)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 动态扩容逻辑</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 如果两边都有持仓（形成对冲），允许额外持有 10 份</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">max_pos </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 9.0</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10.0</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (up_pos </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> and</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> down_pos </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">else</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0.0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>逻辑解析：</strong></p><ul><li>如果不平衡（只有 Yes），限制仓位，防止单边投机。</li><li>如果平衡（Yes/No 都有），说明我们持有的是无风险的合成资产（Synthetic Cash），这时候可以放宽限制。</li></ul><h4 id="_4-额外收益-maker-rebates" tabindex="-1"><a class="header-anchor" href="#_4-额外收益-maker-rebates"><span>4. 额外收益：Maker Rebates</span></a></h4><p>除了 Spread 收益，Polymarket 还有一个官方的 <strong>Maker Rebates Program（做市商返点计划）</strong>。</p><p><strong>机制：</strong></p><ul><li>在 15 分钟 Crypto 市场，Taker 支付的手续费会进入奖励池</li><li>奖励池按做市商的成交量比例，每日分配 USDC 返点</li><li>返点直接打入钱包，无需申请</li></ul><p><strong>如何检查市场是否启用返点：</strong></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 查询 token 的费率</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># fee_rate_bps = 1000 表示启用（1%）</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># fee_rate_bps = 0 表示无费用</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这意味着：<strong>在有费用的市场做市，你不仅赚 Spread，还能额外获得平台返点。</strong></p><h4 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结</span></a></h4><p>双向套利的核心不在于&quot;预测谁赢&quot;，而在于：</p><ol><li><strong>数学上的确定性</strong>：Cost &lt; 1.0 即为盈利。</li><li><strong>执行上的速度</strong>：利用批量下单抢占盘口。</li><li><strong>风控上的平衡</strong>：通过库存管理防止单边风险。</li><li><strong>返点加成</strong>：在启用费用的市场，还能获得额外的 Maker Rebates。</li></ol><p>虽然单笔只赚几美分，但机器一天 24 小时不知疲倦地搬砖，积少成多。<br> 这就是量化的魅力。</p>`,35)])])}const g=s(r,[["render",p]]),d=JSON.parse('{"path":"/web3/polymarket/polymarket-market-making-strategy.html","title":"Polymarket 量化交易实战（八）：双向套利策略详解","lang":"zh-CN","frontmatter":{"title":"Polymarket 量化交易实战（八）：双向套利策略详解","shortTitle":"双向套利策略详解","date":"2025-11-19T00:00:00.000Z","categories":["量化交易","Polymarket"],"tags":["Python","Web3"],"order":9,"cover":"/covers/polymarket/polymarket-market-making-strategy.png","description":"Polymarket 量化交易实战（八）：双向套利策略详解 这是系列中最“硬核”的一篇。 我们将揭开 V5 机器人的核心盈利逻辑——双向做市（Two-Sided Market Making）。 这里没有玄学，只有数学。 1. 策略原理：利用互补性 Arbitrage Math: Cost < ValueArbitrage Math: Cost < Va...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Polymarket 量化交易实战（八）：双向套利策略详解\\",\\"image\\":[\\"https://sharebravery.com/covers/polymarket/polymarket-market-making-strategy.png\\"],\\"datePublished\\":\\"2025-11-19T00:00:00.000Z\\",\\"dateModified\\":\\"2026-02-08T06:53:18.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"不辞远\\",\\"url\\":\\"https://github.com/sharebravery\\"}]}"],["meta",{"property":"og:url","content":"https://sharebravery.com/web3/polymarket/polymarket-market-making-strategy.html"}],["meta",{"property":"og:site_name","content":"不辞远的分享"}],["meta",{"property":"og:title","content":"Polymarket 量化交易实战（八）：双向套利策略详解"}],["meta",{"property":"og:description","content":"Polymarket 量化交易实战（八）：双向套利策略详解 这是系列中最“硬核”的一篇。 我们将揭开 V5 机器人的核心盈利逻辑——双向做市（Two-Sided Market Making）。 这里没有玄学，只有数学。 1. 策略原理：利用互补性 Arbitrage Math: Cost < ValueArbitrage Math: Cost < Va..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://sharebravery.com/covers/polymarket/polymarket-market-making-strategy.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2026-02-08T06:53:18.000Z"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://sharebravery.com/covers/polymarket/polymarket-market-making-strategy.png"}],["meta",{"name":"twitter:image:alt","content":"Polymarket 量化交易实战（八）：双向套利策略详解"}],["meta",{"property":"article:tag","content":"Web3"}],["meta",{"property":"article:tag","content":"Python"}],["meta",{"property":"article:published_time","content":"2025-11-19T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2026-02-08T06:53:18.000Z"}]]},"git":{"createdTime":1770437222000,"updatedTime":1770533598000,"contributors":[{"name":"sharebravery","username":"sharebravery","email":"sharebravery@gmail.com","commits":2,"url":"https://github.com/sharebravery"}]},"readingTime":{"minutes":2.89,"words":868},"filePathRelative":"web3/polymarket/polymarket-market-making-strategy.md","excerpt":"\\n<p><strong>这是系列中最“硬核”的一篇。</strong></p>\\n<p>我们将揭开 V5 机器人的核心盈利逻辑——双向做市（Two-Sided Market Making）。<br>\\n这里没有玄学，只有数学。</p>\\n<h4>1. 策略原理：利用互补性</h4>\\n<figure><figcaption>Arbitrage Math: Cost &lt; Value</figcaption></figure>\\n<p>预测市场有一个核心公理：<br>\\n<strong>Yes Price + No Price = 1.0 (理论值)</strong></p>\\n<p>如果市场上 Yes 卖 0.60，No 卖 0.40，这是完美平衡。<br>\\n但实际上，订单簿往往是这样的：</p>","autoDesc":true}');export{g as comp,d as data};
