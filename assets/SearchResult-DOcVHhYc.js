import{g as W,u as N,h as X,i as Z,j as ee,k as te,w as ae,l as e,s as le,R as D,m as re,n as se,p as oe,q as ie,t as S,v as E,x as ne,y as ce,z as $,A as I,B as ue,C as he,D as de,L as me,E as ve,F as pe,G as ye,H as ge,I as ke,J as x,K as be,M}from"./app-BHjMauqm.js";const we=["/","/intro.html","/space-station.html","/insights/custom-writing-skills-tutorial.html","/web3/web3-ton-development-tips.html","/tech/backend/","/tech/backend/aliyun-ecs-java-web-env.html","/tech/backend/nestjs-connect-mongodb.html","/tech/backend/nodejs-novel-crawler-nestjs-proxy.html","/tech/devops/","/tech/devops/ccaa-offline-downloader.html","/tech/devops/frontend-container-config-injection.html","/tech/devops/gitlab-runner-setup.html","/tech/devops/linux-socket-and-process.html","/tech/devops/mediawiki-setup.html","/tech/devops/static-vs-dynamic-libraries.html","/tech/devops/weengine-on-ecs.html","/tech/frontend/","/tech/frontend/frontend-table-export-merge-1.html","/tech/frontend/frontend-table-export-merge-2.html","/tech/frontend/frontend-table-export-merge-3.html","/tech/frontend/monaco-editor-websocket-debug.html","/tech/frontend/svg-doodle-component.html","/tech/hardware/1248-binary-conversion.html","/tech/hardware/","/tech/hardware/distributed-robot-inspection-system.html","/tech/hardware/hackintosh-simple-guide.html","/tech/hardware/hyper-v-embedded-linux-dev.html","/tech/hardware/iec-61499-industrial-automation.html","/tech/hardware/linux-gpio-guide.html","/tech/hardware/modbus-rs485-guide.html","/tech/hardware/rs485-serial-communication-guide.html","/tech/tools/","/tech/tools/git-panic-room.html","/tech/tools/package-manager-battle.html","/tech/tools/writing-workflow-replication.html","/web3/polymarket/","/web3/polymarket/polymarket-api-guide.html","/web3/polymarket/polymarket-batch-orders.html","/web3/polymarket/polymarket-binance-arbitrage.html","/web3/polymarket/polymarket-bot-dev-journey.html","/web3/polymarket/polymarket-gnosis-safe-proxy.html","/web3/polymarket/polymarket-market-making-strategy.html","/web3/polymarket/polymarket-risk-management.html","/web3/polymarket/polymarket-strategy-pivot.html","/web3/polymarket/polymarket-trading-bot-intro.html","/web3/polymarket/polymarket-websocket-orderbook.html","/web3/polymarket/prediction-market-future.html","/web3/polymarket/prediction-market-vs-finance.html","/404.html","/insights/","/web3/","/tech/","/category/","/category/%E5%B7%A5%E5%85%B7/","/category/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/","/category/devops/","/category/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/","/category/%E7%A1%AC%E4%BB%B6%E4%B8%8E%E7%B3%BB%E7%BB%9F/","/category/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7/","/category/%E9%87%8F%E5%8C%96%E4%BA%A4%E6%98%93/","/category/polymarket/","/tag/","/tag/ai/","/tag/tools/","/tag/thinking/","/tag/backend/","/tag/web3/","/tag/java/","/tag/node.js/","/tag/nestjs/","/tag/mongodb/","/tag/devops/","/tag/docker/","/tag/kubernetes/","/tag/gitlab/","/tag/git/","/tag/linux/","/tag/frontend/","/tag/ide/","/tag/hardware/","/tag/hackintosh/","/tag/gpio/","/tag/workflow/","/tag/python/","/tag/%E5%A5%97%E5%88%A9/","/tag/polymarket/","/article/","/star/","/timeline/"],fe="SLIMSEARCH_QUERY_HISTORY",g=M(fe,[]),Ee=()=>{const{queryHistoryCount:r}=x;return{enabled:r>0,queryHistories:g,addQueryHistory:n=>{g.value=Array.from(new Set([n,...g.value.slice(0,r-1)]))},removeQueryHistory:n=>{g.value=[...g.value.slice(0,n),...g.value.slice(n+1)]}}},q=r=>we[r.id]+("anchor"in r?`#${r.anchor}`:""),xe="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:T}=x,k=M(xe,[]),He=()=>({enabled:T>0,resultHistories:k,addResultHistory:i=>{{const n={link:q(i),display:i.display};"header"in i&&(n.header=i.header),k.value=[n,...k.value.slice(0,T-1)]}},removeResultHistory:i=>{k.value=[...k.value.slice(0,i),...k.value.slice(i+1)]}}),Ae=r=>{const{page:i,routeLocale:n}=ue(),H=he(),s=S(0),b=E(()=>s.value>0),h=ge([]);return de(()=>{const{search:A,terminate:v}=me(),w=ke(p=>{const{resultsFilter:B=l=>l,querySplitter:y,suggestionsFilter:F,...o}=H.value;p?(s.value+=1,A(p,n.value,o).then(l=>B(l,p,n.value,i.value)).then(l=>{s.value-=1,h.value=l}).catch(l=>{console.warn(l),s.value-=1,s.value||(h.value=[])})):h.value=[]},x.searchDelay-x.suggestDelay,{maxWait:5e3});ve([r,n],([p])=>w(p.join(" "))),pe(()=>{v()})}),{isSearching:b,results:h}};var Re=W({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(r,{emit:i}){const n=N(),H=X(),s=Z(ee),{addQueryHistory:b,queryHistories:h,removeQueryHistory:A}=Ee(),{resultHistories:v,addResultHistory:w,removeResultHistory:p}=He(),B=be(r,"queries"),{results:y,isSearching:F}=Ae(B),o=ie({isQuery:!0,index:0}),l=S(0),d=S(0),j=E(()=>h.value.length>0||v.value.length>0),R=E(()=>y.value.length>0),C=E(()=>y.value[l.value]||null),U=()=>{const{isQuery:t,index:a}=o;a===0?(o.isQuery=!t,o.index=t?v.value.length-1:h.value.length-1):o.index=a-1},_=()=>{const{isQuery:t,index:a}=o;a===(t?h.value.length-1:v.value.length-1)?(o.isQuery=!t,o.index=0):o.index=a+1},O=()=>{l.value=l.value>0?l.value-1:y.value.length-1,d.value=C.value.contents.length-1},P=()=>{l.value=l.value<y.value.length-1?l.value+1:0,d.value=0},Y=()=>{d.value<C.value.contents.length-1?d.value+=1:P()},z=()=>{d.value>0?d.value-=1:O()},Q=t=>t.map(a=>ye(a)?a:e(a[0],a[1])),G=t=>{if(t.type==="customField"){const a=ne[t.index]||"$content",[m,c=""]=ce(a)?a[H.value].split("$content"):a.split("$content");return t.display.map(u=>e("div",Q([m,...u,c])))}return t.display.map(a=>e("div",Q(a)))},f=()=>{l.value=0,d.value=0,i("updateQuery",""),i("close")},J=()=>e("div",{class:"slimsearch-records"},e("div",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},s.value.queryHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},h.value.map((t,a)=>{const m=o.isQuery&&o.index===a;return e("li",{class:["slimsearch-record-matches",{active:m}],role:"option","aria-selected":m,onClick:()=>{i("updateQuery",t)}},e("div",[e($,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},t),e("button",{type:"button",class:"slimsearch-remove-icon",title:s.value.remove,"aria-label":s.value.remove,innerHTML:I,onClick:c=>{c.preventDefault(),c.stopPropagation(),A(a)}})]))}))])),K=()=>e("ul",{class:"slimsearch-records"},e("li",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},s.value.resultHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},v.value.map((t,a)=>{const m=!o.isQuery&&o.index===a;return e("li",{class:["slimsearch-record-matches",{active:m}],role:"option","aria-selected":m},e(D,{to:t.link,onClick:()=>{f()}},()=>[e($,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[t.header?e("div",{class:"slimsearch-record-content-header"},t.header):null,e("div",t.display.map(c=>Q(c)).flat())]),e("button",{type:"button",class:"slimsearch-remove-icon",title:s.value.remove,"aria-label":s.value.remove,innerHTML:I,onClick:c=>{c.preventDefault(),c.stopPropagation(),p(a)}})]))}))]));return te("keydown",t=>{if(r.isFocusing){if(R.value){if(t.key==="ArrowUp")z();else if(t.key==="ArrowDown")Y();else if(t.key==="Enter"){const a=C.value.contents[d.value];b(r.queries.join(" ")),w(a),n.push(q(a)),f()}}else if(t.key==="ArrowUp")U();else if(t.key==="ArrowDown")_();else if(t.key==="Enter"){const{index:a}=o;o.isQuery?(t.preventDefault(),i("updateQuery",h.value[a])):(n.push(v.value[a].link),f())}}}),ae([l,d],()=>{document.querySelector(".slimsearch-record.active .slimsearch-record-matches.active")?.scrollIntoView(!1)},{flush:"post"}),()=>e("div",{id:"slimsearch-results",class:["slimsearch-result-wrapper",{empty:r.queries.length?!R.value:!j.value}]},r.queries.length?F.value?e(le,{hint:s.value.searching}):R.value?e("div",{class:"slimsearch-records",role:"listbox","aria-labeledby":"slimsearch-label"},y.value.map(({title:t,contents:a},m)=>{const c=l.value===m;return e("div",{class:["slimsearch-record",{active:c}],role:"group","aria-selected":c},[e("div",{class:"slimsearch-record-title"},t||s.value.defaultTitle),e("ul",{class:"slimsearch-record-contents"},a.map((u,V)=>{const L=c&&d.value===V;return e("li",{class:["slimsearch-record-matches",{active:L}],role:"option","aria-selected":L},e(D,{to:q(u),onClick:()=>{b(r.queries.join(" ")),w(u),f()}},()=>[u.type==="text"?null:e(u.type==="title"?re:u.type==="heading"?se:oe,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[u.type==="text"&&u.header?e("div",{class:"slimsearch-record-content-header"},u.header):null,e("div",G(u))])]))}))])})):s.value.emptyResult:j.value?[J(),K()]:s.value.emptyHistory)}});export{Re as default};
